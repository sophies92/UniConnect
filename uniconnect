#!/bin/bash

#------------------------------------------------------------------------------------------------------------
# Mount Aber Uni Storage Drives using sshfs
# Author: Sophie Short
# Date last modified: 2024.01.22
# Version: 0.1.2
#------------------------------------------------------------------------------------------------------------
version="0.1.2"
dateModified="2024.01.22"

istr=$1
istrcaps=${istr^^}
userstr=$2


Help()
{
    echo "Add description of the script functions here."
    echo
    echo "Syntax: scriptTemplate [-g|h|V]"
    echo "options:"
    echo "h     Print this Help and exit."
    echo "V     Print software version and exit."
    echo
}

Version()
{
    echo "uniconnect"
    echo
    echo "Version: " $version
    echo "Author: Sophie Short"
    echo "Last Modified: " $dateModified
    echo
}

CheckMakeDir()
{
    if [ ! -d $HOME/$istrcaps ]; 
    then
        mkdir $HOME/$istrcaps
    fi
}

Connect()
{
    sshfs $userstr@shellsrv.dcs.aber.ac.uk:/$istr/$userstr/ $HOME/$istrcaps
}

while getopts ":h:V" option; do
   case $option in
    h)  # display Help
        Help
        exit;;
    V)  # Version info
        Version
        exit;;
    \?) # Invalid option
        echo "Error: Invalid option"
        exit;;
   esac
done

if [ ! $istr = "" ] && [ ! $userstr = "" ]
then
    CheckMakeDir
    Connect
fi